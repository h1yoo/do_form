<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.io.*" %>
<%
    request.setCharacterEncoding("UTF-8");

    // 메시지 출력용 변수
    String msg = null;

    if ("POST".equalsIgnoreCase(request.getMethod())) {
        String content = request.getParameter("content");
        if (content != null && !content.trim().isEmpty()) {
            String filePath = application.getRealPath("/gpwns/copy.txt");
            try {
                FileWriter fw = new FileWriter(filePath, false); // false = 덮어쓰기
                fw.write(content);
                fw.close();
                msg = "저장 완료!";
            } catch (IOException e) {
                msg = "저장 실패: " + e.getMessage();
            }
        } else {
            msg = "내용이 비어 있습니다.";
        }
    }
%>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>JSP 텍스트 저장</title>
    <script>
        <% if (msg != null) { %>
            alert("<%= msg %>");
        <% } %>
    </script>
</head>
<body>
    <h2>텍스트 입력 후 저장</h2>

    <form method="post" action="1.jsp">
        <textarea name="content" rows="10" cols="50" placeholder="여기에 텍스트 입력..."></textarea><br>
        <button type="submit">저장</button>
    </form>
</body>
</html>
